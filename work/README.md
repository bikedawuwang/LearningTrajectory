# 19年-20年我到底做了什么?

19年至20年，工作与技术来到了一个小的提升期。

因为新老系统的框架差异，旧业务系统还存在 jquery，angular。但是因为技术选型目前新的业务系统已经都更改为React，所以如何将系统整合便成为了今年工作的一个重点。

### 组件化/微前端

![](/Users/zhouminghui/myProject/LearningTrajectory/assets/业务系统.jpg)

目前各系统都是独立的系统（独立的域名、独立的模板引擎、各种前端技术栈穿插在一起），各系统配色、交互也都不相同。

所以我们面临一个问题，当我们接到需求更改头部信息或者导航信息时，所有系统都要同时修改，这为我们带来了更高的维护、发布成本。

所以在前端方面，我们做了两件事情来解决这个问题。

#### 组件化

- B端产品相对于C端来讲，更注重业务流程的清晰，当页面的复杂度很高的时候，组件之间的交互会变得十分复杂，这就使组件类型的动画变得多特别
- B端产品一个页面上可以有十几个业务接口同时存在，并且为了保证服务端的简单性，后端提供的数据体积特别庞大
- 相对C端产品，B端产品业务层次上更复杂，也就是数据结构与业务组件的复用难度

![](/Users/zhouminghui/myProject/LearningTrajectory/assets/组件化.jpg)

#### 微前端

组件开发完成后，首要的任务就是如何快速把组件替换进去，这里我们采用了微前端

调研了当前微前端的方案

- 通过路由分发，但是当前系统已经是路由分发，我并不希望去更改原有的路由
- 通过iframe去分发，因为系统本身已经嵌入到友商系统内，所以我们不想出现多层的iframe嵌套的情况
- Web Components

最终我们选择了JQ，AngularJS相关项目以元件的方法嵌入，React相关的项目通过组件的方式嵌入

公共部分的元件/组件通过React进行开发，编译后将支持JQ，AngularJS

#### 如何保证一次上线更新所有系统

当方案全部选定后，因为系统包含十余个仓库，所以我们遇到了一个问题，那就是如何保证一次上线，全部更新。

所以我们对每个项目搭建了一套监控服务，用来监控内容更新

![](/Users/zhouminghui/myProject/LearningTrajectory/assets/监控服务.jpg)

至此我们不仅解决了公共部分迭代与维护的问题，同时也解决了如何保证所以系统保持统一的问题。

## APP设计

因为当前APP只涉及了一个业务系统，但是当需要对接多业务系统时，我们可能就会遇到一个新的问题。

那就是不同的业务线可能是某些独立的团队在负责，按照传统的模式，大家在同一个工程反复修改，带来了很大的沟通成本，长时间下代码也会变得无法维护。

![](/Users/zhouminghui/myProject/LearningTrajectory/assets/APP业务系统复杂度.jpg)

### 技术选型

经过调研，我们认为：

- 原生。首先我们是前端团队，并且在方向上更擅长前端与服务端，对于Android与IOS并没有相关的技术储备
- Weex 阿里为主导，但是已经出于半更新状态
- hybrid模式，相对简单，容易上手，但是整体上性能比较差，包的体积也会略大
- React-Native 技术栈上与团队温和，社区广泛，目前可参照的项目也比较多。

开发的细节这里不多做阐述，主要描述如何实现多业务拆分

TODO: 待补充。。。

